<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><style class="_styletron_hydrate_">.ag{font-family:system-ui, "Helvetica Neue", Helvetica, Arial, sans-serif}.ah{font-size:16px}.ai{font-weight:normal}.aj{line-height:24px}.ak{box-sizing:border-box}.al{background-color:#FFFFFF}.am{border-bottom-width:1px}.an{border-bottom-style:solid}.ao{border-bottom-color:#E2E2E2}.ap{-webkit-padding-start:16px;-moz-padding-start:16px;padding-inline-start:16px}.aq{-webkit-padding-end:16px;-moz-padding-end:16px;padding-inline-end:16px}.at{height:100%}.au{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex}.av{-webkit-box-align:center;align-items:center}.aw{padding-top:10px}.ax{padding-bottom:10px}.b0{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.b1{-webkit-box-lines:nowrap;flex-wrap:nowrap}.b2{-webkit-box-pack:center;justify-content:center}.b3{background-color:transparent}.b4{color:#000000}.b5{border-left-width:0}.b6{border-top-width:0}.b7{border-right-width:0}.b8{border-bottom-width:0}.b9{padding-top:4px}.ba{padding-bottom:4px}.bb{padding-left:4px}.bc{padding-right:4px}.bd{margin-left:0}.be{margin-top:0}.bf{margin-right:16px}.bg{margin-bottom:0}.bh{outline:none}.bi{outline-offset:-3px}.bj{-webkit-appearance:none}.bk{cursor:pointer}.bl{display:inline-block}.bm{fill:currentColor}.bn{color:currentColor}.bo{height:24px}.bp{width:24px}.bq{font-size:20px}.br{font-weight:500}.bs{line-height:28px}.bt{text-decoration:none}.by{min-width:35vw}.bz{-webkit-box-pack:justify;justify-content:space-between}.c0{margin:auto}.c1{max-width:1280px}.c2{-webkit-padding-before:18px;padding-block-start:18px}.c3{-webkit-padding-after:18px;padding-block-end:18px}.c4{-webkit-box-flex:1;flex-grow:1}.c5{-webkit-box-pack:end;justify-content:flex-end}.c6{-webkit-box-align:stretch;align-items:stretch}.c7{-webkit-padding-end:40px;-moz-padding-end:40px;padding-inline-end:40px}.c8{color:#6B6B6B}.c9{margin-left:20px}.ca{margin-right:20px}.cb{padding-top:0}.cc{padding-bottom:0}.cd{border-bottom-width:2px}.ce{border-bottom-color:transparent}.cf{white-space:initial}.cg:first-child{margin-left:0}.ch:last-child{margin-right:0}.ci:hover{color:#000000}.cj{border-bottom-color:#000000}.ck{cursor:default}.cl{padding-left:0}.cm{padding-right:0}.cn{margin-right:0}.co{background-color:#000000}.cp{border-top-left-radius:50%}.cq{border-top-right-radius:50%}.cr{border-bottom-right-radius:50%}.cs{border-bottom-left-radius:50%}.ct{height:32px}.cu{width:32px}.cv{display:none}.cw{object-fit:cover}.cx{color:#FFFFFF}.cy{height:28px}.cz{width:28px}.d0{padding-left:6px}.d1{max-width:1680px}.d2{min-height:calc(100vh - 135px)}.d3{overflow:hidden}.d4{font-size:18px}.d5{font-size:inherit}.d6{line-height:inherit}.d7{-webkit-transition-property:backgroundSize;-moz-transition-property:backgroundSize;transition-property:backgroundSize}.d8{transition-duration:500ms}.d9{transition-timing-function:cubic-bezier(0.23, 1, 0.32, 1)}.da{text-decoration:underline}.db{text-underline-position:under}.dc{will-change:background-size}.dd{background-size:0% 100%, 100% 100%}.de{background-repeat:no-repeat}.df{background-image:none}.dg:hover{color:#545454}.dh:hover{background-size:100% 100%, 100% 100%}.di:focus{outline:none}.dj:focus{outline-offset:1px}.dk:focus{text-decoration:none}.dl:visited{color:#333333}.dm:active{color:#6B6B6B}.dn{font-size:12px}.do{line-height:20px}</style><style class="_styletron_hydrate_" media="screen and (min-width: 600px)">.ay{padding-top:20px}.az{padding-bottom:20px}.bu{font-family:system-ui, "Helvetica Neue", Helvetica, Arial, sans-serif}.bv{font-size:24px}.bw{font-weight:500}.bx{line-height:32px}</style><style class="_styletron_hydrate_" media="screen and (min-width: 970px)">.ae{display:none}.ar{-webkit-padding-start:64px;-moz-padding-start:64px;padding-inline-start:64px}.as{-webkit-padding-end:64px;-moz-padding-end:64px;padding-inline-end:64px}</style><style class="_styletron_hydrate_" media="screen and (max-width: 969px)">.af{display:none}</style><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-e24aa087a93c03f9.js" defer=""></script><script src="/_next/static/chunks/framework-7dc8a65f4a0cda33.js" defer=""></script><script src="/_next/static/chunks/main-c354a30bda3d62a6.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e17d6ebc4f636cb4.js" defer=""></script><script src="/_next/static/chunks/pages/usage-3b20a8e7e55fe4ce.js" defer=""></script><script src="/_next/static/SAR1uRbHRR6x5lm1Fe7w8/_buildManifest.js" defer=""></script><script src="/_next/static/SAR1uRbHRR6x5lm1Fe7w8/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Inter&display=optional">@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:optional;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:optional;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZJhjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:optional;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZthjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:optional;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZNhjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:optional;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZxhjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:optional;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZBhjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:optional;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZFhjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:optional;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hjp-Ek-_EeA.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class=""><div data-baseweb="app-nav-bar" class="ag ah ai aj ak al am an ao ap aq ar as"><div class="ae"><div class="ak at au av aw ax ay az"><button data-baseweb="button" class="ak au b0 b1 b2 av b3 b4 b5 b6 b7 b8 b9 ba bb bc bd be bf bg bh bi bj bk"><svg data-baseweb="icon" title="Menu" viewBox="0 0 24 24" class="bl bm bn bo bp"><title>Menu</title><rect x="4" y="11" width="16" height="2" rx="1"></rect><rect x="4" y="5" width="16" height="2" rx="1"></rect><rect x="4" y="17" width="16" height="2" rx="1"></rect></svg></button><div class="ag bq br bs b4 bt bu bv bw bx by">Unusual Time Series Detection</div></div></div><div class="af"><div class=""><div class="av au bz c0 c1 c2 c3"><div class="ag bq br bs b4 bt bu bv bw bx by">Unusual Time Series Detection</div><div role="navigation" aria-label="Main navigation" class="ak at au b0 c4 b1 c5 c6 c7"><div aria-selected="false" tabindex="0" class="ak au av c8 c9 ca cb cc bh bi cd an ce bk cf cg ch ci">Home</div><div aria-selected="true" tabindex="0" class="ak au av b4 c9 ca cb cc bh bi cd an cj ck cf cg ch ci">Usage</div><div aria-selected="false" tabindex="0" class="ak au av c8 c9 ca cb cc bh bi cd an ce bk cf cg ch ci">About</div></div><button data-baseweb="button" aria-haspopup="true" aria-expanded="false" class="ak au b0 b1 b2 av b3 b4 b5 b6 b7 b8 cb cc cl cm bd be cn bg bh bi bj bk"><div aria-label="Version" role="img" data-baseweb="avatar" class="co cp cq cr cs ak bl ct cu"><img alt="Version" class="cp cq cr cs ak cv ct cu cw"/><div class="ag ah ai aj cx av au b2 at">V</div></div><svg data-baseweb="icon" title="Down" viewBox="0 0 24 24" class="bl bm bn cy cz d0"><title>Down</title><path transform="rotate(270, 12, 12)" fill-rule="evenodd" clip-rule="evenodd" d="M9 12C9 12.2652 9.10536 12.5196 9.29289 12.7071L13.2929 16.7071C13.6834 17.0976 14.3166 17.0976 14.7071 16.7071C15.0976 16.3166 15.0976 15.6834 14.7071 15.2929L11.4142 12L14.7071 8.70711C15.0976 8.31658 15.0976 7.68342 14.7071 7.29289C14.3166 6.90237 13.6834 6.90237 13.2929 7.29289L9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12Z"></path></svg></button></div></div></div></div><div data-baseweb="block" class="b4 al d1 d2 d3 c0"><div data-baseweb="block" class="c1 c0"><p data-baseweb="typo-paragraphlarge" class="b4 ag ai d4 bs">The simplest way to get started is to<!-- --> <a data-baseweb="link" href="/data/zips/UTSD.zip" class="b4 ag d5 br d6 d7 d8 d9 da db dc dd de df dg dh di dj dk dl dm">download the entire UTSD collection.</a>; optionally, you can download individual tasks by<!-- --> <a data-baseweb="link" href="/" class="b4 ag d5 br d6 d7 d8 d9 da db dc dd de df dg dh di dj dk dl dm">selecting the task in the overview table and clicking download</a>. The data for each task is provided in multiple CSV files. There is one file containing all datapoints considered normal and ten files containing randomly sampled outliers. The files are named<!-- --> <i>$(DATASET)_$(CLASSES)_$(FRACTION)_$(VARIANT).csv</i>, for example, <i>Crop_1_0.1_1.csv</i> would describe the first randomly sampled variant of the &#x27;Crop&#x27; dataset with with 10% outliers and one normal class.</p><p data-baseweb="typo-paragraphlarge" class="b4 ag ai d4 bs">The following example shows how to predict a single variant of the previously mentioned task using Python and the <a data-baseweb="link" href="https://scikit-learn.org/stable/" class="b4 ag d5 br d6 d7 d8 d9 da db dc dd de df dg dh di dj dk dl dm">scikit-learn library</a>.</p><pre style="overflow-x:auto"><code>
from sklearn.model_selection import RepeatedStratifiedKFold
from sklearn.ensemble import IsolationForest
from sklearn.metrics import roc_auc_score

def cross_validate(model, x, y, n_splits=2, n_repeats=5, random_state=0):
    &quot;&quot;&quot;
    Calculates the mean stratified cv result over a number of folds and repeats.
    Note: The model is expected to follow the scikit-learn outlier detection
    interface providing `fit` and `decision_function` methods. Additionally,
    scikit-learn models use increasing scores to indicate normality.
    &quot;&quot;&quot;
    cv = RepeatedStratifiedKFold(
        n_splits=n_splits,
        n_repeats=n_repeats,
        random_state=random_state
    )
    results = []
    for train_index, test_index in cv.split(x, y):
        model.fit(x[train_index])
        y_true = y[test_index]
        y_pred = model.decision_function(x[test_index])
        score = roc_auc_score(y_true, -y_pred)
        results.append(score)
    return np.mean(results)

model = IsolationForest(random_state=0)
dataset = &quot;Crop&quot;
classes = 1
fraction = 0.1
variant = 1

# read normal data
x_normal = pd.read_csv(PATH_TO_DATASETS / dataset / f&quot;{dataset}_{classes}_normal.csv&quot;, header=None)
y_normal = np.zeros(len(x_normal))

# read outlier data
x_outlier = pd.read_csv(PATH_TO_DATASETS / dataset / f&quot;{dataset}_{classes}_{fraction}_{variant}.csv&quot;, header=None)
y_outlier = np.ones(len(x_outlier))

# concatenate data
x = np.concatenate([x_normal, x_outlier])
y = np.concatenate([y_normal, y_outlier])

# predict roc auc
cross_validate(model, x, y)
</code></pre><p data-baseweb="typo-paragraphlarge" class="b4 ag ai d4 bs">Similarly, predicting a single variant with Julia using<!-- --> <a data-baseweb="link" href="https://alan-turing-institute.github.io/MLJ.jl/dev/" class="b4 ag d5 br d6 d7 d8 d9 da db dc dd de df dg dh di dj dk dl dm">MLJ</a> and<!-- --> <a data-baseweb="link" href="https://outlierdetectionjl.github.io/OutlierDetection.jl/stable/" class="b4 ag d5 br d6 d7 d8 d9 da db dc dd de df dg dh di dj dk dl dm">OutlierDetection.jl</a> <!-- -->can be achieved as follows.</p><pre style="overflow-x:auto"><code>
using CSV
using MLJ
using OutlierDetection
using DataFrames
KNN = @iload KNNDetector pkg = OutlierDetectionNeighbors

function cross_validate(model, x, y, n_splits=2, n_repeats=5, random_state=0)
    &quot;&quot;&quot;
    Calculates the mean stratified cv result over a number of folds and repeats.
    &quot;&quot;&quot;
    cv = StratifiedCV(nfolds=n_splits, shuffle=true, rng=random_state)
    probabilistic_model = ProbabilisticDetector(model)
    score = evaluate(probabilistic_model, x, y;
        resampling=cv,
        repeats=n_repeats
    ).measurement[1]
    return score
end

model = KNN(k=100)
dataset = &quot;Crop&quot;
classes = 1
fraction = 0.1
variant = 1

# read normal data
x_normal = CSV.read(&quot;$(PATH_TO_DATASETS)/$(dataset)/$(dataset)_$(classes)_normal.csv&quot;, DataFrame, header=false)
y_normal = repeat([&quot;normal&quot;], nrow(x_normal))

# read outlier data
x_outlier = CSV.read(&quot;$(PATH_TO_DATASETS)/$(dataset)/$(dataset)_$(classes)_$(fraction)_$(variant).csv&quot;, DataFrame, header=false)
y_outlier = repeat([&quot;outlier&quot;], nrow(x_outlier))

# concatenate data
x = reduce(vcat, [x_normal, x_outlier])
y = vcat(y_normal, y_outlier) |&gt; to_categorical

# predict roc auc
cross_validate(model, x, y)
</code></pre><p data-baseweb="typo-paragraphlarge" class="b4 ag ai d4 bs">Using a different programming language?<!-- --> <a data-baseweb="link" href="https://github.com/outlier-detection/utsd/issues/new" class="b4 ag d5 br d6 d7 d8 d9 da db dc dd de df dg dh di dj dk dl dm">Help us improve the documentation by providing a similar code snippet</a>.</p></div></div><div data-baseweb="block" class="c1 c0"><hr/><p data-baseweb="typo-paragraphxsmall" style="text-align:right" class="b4 ag ai dn do">Learn more about UTSD in<!-- --> <a data-baseweb="link" href="https://dl.acm.org/doi/abs/10.1007/978-3-031-12670-3_14" class="b4 ag d5 br d6 d7 d8 d9 da db dc dd de df dg dh di dj dk dl dm">our paper</a>, or contribute to the project on<!-- --> <a data-baseweb="link" href="https://github.com/outlier-detection/utsd/" class="b4 ag d5 br d6 d7 d8 d9 da db dc dd de df dg dh di dj dk dl dm">Github</a>.</p></div></div><div class=""></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/usage","query":{},"buildId":"SAR1uRbHRR6x5lm1Fe7w8","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>